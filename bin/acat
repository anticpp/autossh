#!/usr/bin/python3

'''
Usage:
    acat            - Cat all hosts.
    acat [target]   - Cat target host.
'''

import os
import sys
import autossh.config
import autossh.lookup

target = ""
if len(sys.argv) >=2:
    target = sys.argv[1]

c = autossh.config.load()
lu = autossh.lookup.load(os.path.expanduser(c.host_file))

if len(target)>0:
    ok, info = lu.get(target)
    if not ok:
        print("Host not found '%s'."%(target))
    else:
        print(info)
else:
    content = ""
    try:
        f = open(os.path.expanduser(c.host_file))
        content = f.read()
        f.close()
    except IOError as e:
        content = "None"
    print(content)

